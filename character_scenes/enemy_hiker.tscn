[gd_scene load_steps=18 format=3 uid="uid://d2mk2a7gtgcb5"]

[ext_resource type="Script" path="res://States/state_machine.gd" id="1_qp77q"]
[ext_resource type="Script" path="res://States/idle.gd" id="2_fetei"]
[ext_resource type="Script" path="res://States/chasing.gd" id="3_yqvhn"]
[ext_resource type="Script" path="res://States/attacking.gd" id="4_3ebab"]
[ext_resource type="Script" path="res://States/ragdoll.gd" id="5_2wub7"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_03mwu"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_n48k1"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_r3dgs"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_oamyr"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_r0bef"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_n0yqx"]

[sub_resource type="SphereShape3D" id="SphereShape3D_uql63"]

[sub_resource type="SphereShape3D" id="SphereShape3D_aucg2"]

[sub_resource type="Animation" id="Animation_ssaug"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RightArm:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RightArm:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.474241, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("LeftArm:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("LeftArm:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.47473, 0, 0)]
}

[sub_resource type="Animation" id="Animation_i5v0i"]
resource_name = "left_arm_punch"
length = 3.0
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("LeftArm:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0416667, 1.95833, 2),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [false, true, true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("LeftArm:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.166667, 0.833333, 1.95833),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-0.47473, 0, 0), Vector3(-1.74533, 0, 0), Vector3(-0.47473, 0, 0)]
}

[sub_resource type="Animation" id="Animation_eedv8"]
resource_name = "right_arm_punch"
length = 3.0
step = 0.0416667
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RightArm:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0416667, 1.95833, 2),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [false, true, true, false]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RightArm:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.166667, 0.833333, 1.95833),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-0.474241, 0, 0), Vector3(-1.74533, 0, 0), Vector3(-0.47473, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_vntm6"]
_data = {
"RESET": SubResource("Animation_ssaug"),
"left_arm_punch": SubResource("Animation_i5v0i"),
"right_arm_punch": SubResource("Animation_eedv8")
}

[node name="EnemyHiker" type="CharacterBody3D" groups=["Enemy"]]
collision_layer = 4
collision_mask = 3

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_03mwu")

[node name="Mesh" type="MeshInstance3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 1, 0)
material_override = SubResource("StandardMaterial3D_n48k1")
mesh = SubResource("CapsuleMesh_r3dgs")

[node name="RightArm" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.88964, 0.456663, 0, -0.456663, 0.88964, 0, 1, 0)
collision_layer = 4

[node name="RightArmCollision" type="CollisionShape3D" parent="RightArm"]
transform = Transform3D(-0.75, -1.53953e-08, 6.3734e-08, 0, -0.729032, -0.176102, 6.55671e-08, -0.176102, 0.729032, -0.575, -0.5, 0.262)
shape = SubResource("CapsuleShape3D_oamyr")

[node name="RightArmMesh" type="MeshInstance3D" parent="RightArm"]
transform = Transform3D(-0.75, 0, -6.55671e-08, 0, 0.75, 0, 6.55671e-08, 0, -0.75, -0.575, -0.5, 0.262)
material_override = SubResource("StandardMaterial3D_r0bef")
mesh = SubResource("CapsuleMesh_n0yqx")

[node name="LeftArm" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.889416, 0.457098, 0, -0.457098, 0.889416, 0, 1, 0)

[node name="LeftArmCollision" type="CollisionShape3D" parent="LeftArm"]
transform = Transform3D(0.75, -1.13247e-07, -6.55671e-08, -1.13247e-07, -0.75, 8.47033e-22, -6.55671e-08, 9.90035e-15, -0.75, 0.575, -0.5, 0.262)
shape = SubResource("CapsuleShape3D_oamyr")

[node name="LeftArmMesh" type="MeshInstance3D" parent="LeftArm"]
transform = Transform3D(-0.75, 5.2108e-15, -6.55672e-08, 0, 0.750001, 5.96046e-08, 6.55671e-08, 5.96046e-08, -0.750001, 0.575, -0.5, 0.262)
material_override = SubResource("StandardMaterial3D_r0bef")
mesh = SubResource("CapsuleMesh_n0yqx")
skeleton = NodePath("../../RightArm")

[node name="Detection" type="Area3D" parent="."]
collision_layer = 4

[node name="DetectionRange" type="CollisionShape3D" parent="Detection"]
transform = Transform3D(40, 0, 0, 0, 40, 0, 0, 0, 40, 0, 0, 0)
shape = SubResource("SphereShape3D_uql63")

[node name="Attack" type="Area3D" parent="."]
collision_layer = 4

[node name="AttackRange" type="CollisionShape3D" parent="Attack"]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 3, 0, 1, 0)
shape = SubResource("SphereShape3D_aucg2")

[node name="Animation" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_vntm6")
}

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("1_qp77q")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("2_fetei")

[node name="Chasing" type="Node" parent="StateMachine"]
script = ExtResource("3_yqvhn")

[node name="Attacking" type="Node" parent="StateMachine"]
script = ExtResource("4_3ebab")

[node name="Ragdoll" type="Node" parent="StateMachine"]
script = ExtResource("5_2wub7")
